@using ShafaHRCoreLib.Managers
@using ShafaHRCoreLib.Models
@{
    var roles = AuthorizationAdmin.Current.RoleS.ToList();

    List<SelectListItem> slItems = new List<SelectListItem>();

    AdminRole SelectedObject = null;

    foreach (AdminRole ur in roles)
    {

        SelectListItem slItem = new SelectListItem
        {
            Selected = false
        };

        slItem.Text = CommonFunctions.GetDisplayName(ur.Role);

        if (ur.IsDefault) { SelectedObject = ur; slItem.Selected = true; }

        slItem.Value = ur.Id.ToString();
        slItems.Add(slItem);

    }


    if (SelectedObject != null)
    {
        ViewBag.Roles = new SelectList(slItems, "Value", "Text", SelectedObject.Id);
    }
    else
    {
        ViewBag.Roles = new SelectList(slItems, "Value", "Text");
    }

}
<!DOCTYPE html>

<html lang="en" dir="rtl">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="A fully featured admin theme which can be used to build CRM, CMS, etc.">
    <meta name="author" content="Coderthemes">

    <link rel="shortcut icon" href="/assets/images/favicon.ico">

    <title>@ViewBag.Title</title>

    <!-- DataTables -->
    <link href="/assets/plugins/datatables/jquery.dataTables.min.css" rel="stylesheet" type="text/css" />
    <link href="/assets/plugins/datatables/buttons.bootstrap.min.css" rel="stylesheet" type="text/css" />
    <link href="/assets/plugins/datatables/fixedHeader.bootstrap.min.css" rel="stylesheet" type="text/css" />
    <link href="/assets/plugins/datatables/responsive.bootstrap.min.css" rel="stylesheet" type="text/css" />
    <link href="/assets/plugins/datatables/scroller.bootstrap.min.css" rel="stylesheet" type="text/css" />
    <link href="/assets/plugins/chartist/dist/chartist.min.css" rel="stylesheet" type="text/css">
    <link href="/assets/plugins/bootstrap-touchspin/dist/jquery.bootstrap-touchspin.min.css" rel="stylesheet" />
    <link href="/assets/plugins/switchery/switchery.min.css" rel="stylesheet" />

    <!--Morris Chart CSS -->
    <link rel="stylesheet" href="~/assets/plugins/morris/morris.css">

    <!-- Table css -->
    <link href="/assets/plugins/RWD-Table-Patterns/dist/css/rwd-table.min.css" rel="stylesheet" type="text/css" media="screen">

    <!-- form Uploads -->
    <link href="/assets/plugins/fileuploads/css/dropify.min.css" rel="stylesheet" type="text/css" />

    <!-- App css -->
    <link href="/assets/css/bootstrap-rtl.min.css" rel="stylesheet" type="text/css" />
    <link href="/assets/css/core.css" rel="stylesheet" type="text/css" />
    <link href="/assets/css/components.css" rel="stylesheet" type="text/css" />
    <link href="/assets/css/icons.css" rel="stylesheet" type="text/css" />
    <link href="/assets/css/pages.css" rel="stylesheet" type="text/css" />
    <link href="/assets/css/menu.css" rel="stylesheet" type="text/css" />
    <link href="/assets/css/responsive.css" rel="stylesheet" type="text/css" />
    <link href="/assets/css/PersianDatePicker.css" type="text/css" rel="stylesheet" />

    <!-- HTML5 Shiv and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

    <script src="/assets/js/modernizr.min.js"></script>
    <script src="/assets/js/PersianDatePicker.js" type="text/javascript"></script>

    @*  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link href="https://code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css" rel="stylesheet" />
    <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.min.js"></script> *@

    @*  <script src="/assets/js/jquery-3.7.0.min.js"></script>
    <link href="/assets/plugins/jquery-ui/jquery-ui.css" rel="stylesheet" />
    <script src="/assets/plugins/jquery-ui/jquery-ui.min.js"></script> *@

</head>


<body class="fixed-left">

    <!-- Begin page -->
    <div id="wrapper">

        <!-- Top Bar Start -->
        <div class="topbar">

            <!-- LOGO -->
            <div class="topbar-left">

                <center>
                    <a href="@Url.Action("Index", "Home")" class="logo" target="_blank" title="پژوهشگران سلامت شفا">
                        <img b-zhht1dk06g="" src="/Assets/images/logo.png" alt="" title="" />
                    </a>
                </center>


            </div>

            <!-- Button mobile view to collapse sidebar menu -->
            <div class="navbar navbar-default" role="navigation">

                <div class="container">

                    <!-- Page title -->
                    <ul class="nav navbar-nav navbar-left">

                        <li>
                            <button class="button-menu-mobile open-left">
                                <i class="zmdi zmdi-menu"></i>
                            </button>
                        </li>
                        <li>
                            <h4 class="page-title">@ViewBag.Title</h4>
                        </li>
                    </ul>

                    <!-- Right(Notification and Searchbox -->
                    <ul class="nav navbar-nav navbar-right">
                        @if (AuthorizationAdmin.Current.IsAuthenticated)
                        {
                            <li>
                                <form role="search" class="app-search">
                                    نقش(ها):
                                    @Html.DropDownList("rdUserRoles", (SelectList)ViewBag.Roles, "-- نقش(ها) --", new { id = "rdUserRoles", @class = "form-controlB" })
                                    <input type="button" value="&#10004;" class="form-controlB" id="btnSetRole" />
                                </form>
                            </li>
                            <li>&nbsp;&nbsp;&nbsp;&nbsp;</li>
                        }

                        <li style="display: none">
                            <!-- Notification -->
                            <div class="notification-box">
                                <ul class="list-inline m-b-0">
                                    <li>
                                        <a href="javascript:void(0);" class="right-bar-toggle">
                                            <i class="zmdi zmdi-notifications-none"></i>
                                        </a>
                                        <div class="noti-dot">
                                            <span class="dot"></span>
                                            <span class="pulse"></span>
                                        </div>
                                    </li>
                                </ul>
                            </div>
                            <!-- End Notification bar -->
                        </li>
                        <li class="hidden-xs" style="display: none">
                            <form role="search" class="app-search">
                                <input type="text" placeholder="جستجو..." class="form-control">
                                <a href=""><i class="fa fa-search"></i></a>
                            </form>
                        </li>

                    </ul>

                </div><!-- end container -->
            </div><!-- end navbar -->
        </div>
        <!-- Top Bar End -->
        <!-- ========== Left Sidebar Start ========== -->
        @await Html.PartialAsync("NavBar")
        @*  @Html.Action("NavBar", "Home", new { SelectedMenu = ViewBag.SelectedMenu }) *@
        <!-- Left Sidebar End -->
        <!-- ============================================================== -->
        <!-- Start right Content here -->
        <!-- ============================================================== -->
        <div class="content-page">
            <!-- Start content -->
            <div class="content">

                <div class="container">


                    @RenderBody()

                </div> <!-- container -->

            </div> <!-- content -->

            <footer class="footer">
                <center style="direction: rtl; color: gray">
                    پژوهشگران سلامت شفا  @CommonFunctions.GetPersianDate(DateTime.Now).Substring(0, 4)©
                </center>
            </footer>

        </div>


    </div>
    <!-- END wrapper -->



    <script>
        var resizefunc = [];

    </script>

    <!-- jQuery  -->
    <script src="/assets/js/jquery.min.js"></script>
    <script src="/assets/js/bootstrap-rtl.min.js"></script>
    <script src="/assets/js/detect.js"></script>
    <script src="/assets/js/fastclick.js"></script>
    <script src="/assets/js/jquery.blockUI.js"></script>
    <script src="/assets/js/waves.js"></script>
    <script src="/assets/js/jquery.nicescroll.js"></script>
    <script src="/assets/js/jquery.slimscroll.js"></script>
    <script src="/assets/js/jquery.scrollTo.min.js"></script>
    <script src="/assets/plugins/switchery/switchery.min.js"></script>

    <!-- responsive-table -->
    <script src="/assets/plugins/RWD-Table-Patterns/dist/js/rwd-table.min.js" type="text/javascript"></script>

    <!-- KNOB JS -->
    <!--[if IE]>
    <script type="text/javascript" src="~/Contents/assets/plugins/jquery-knob/excanvas.js"></script>
    <![endif]-->
    <script src="/assets/plugins/jquery-knob/jquery.knob.js"></script>

    <!--Morris Chart-->
    <script src="/assets/plugins/morris/morris.min.js"></script>
    <script src="/assets/plugins/raphael/raphael-min.js"></script>

    <!-- Dashboard init -->
    <script src="/assets/pages/jquery.dashboard.js"></script>

    <!-- file uploads js -->
    <script src="/assets/plugins/fileuploads/js/dropify.min.js"></script>

    <!-- Form wizard -->
    <script src="/assets/plugins/bootstrap-wizard/jquery.bootstrap.wizard.js"></script>
    <script src="/assets/plugins/jquery-validation/dist/jquery.validate.min.js"></script>

    <!-- App js -->
    <script src="/assets/js/jquery.core.js"></script>
    <script src="/assets/js/jquery.app.js"></script>
    <script>


        $(document).ready(function () {


            // jQuery.getJSON('@Url.Action("SelectUserRoles", "Home")', { id: $(this).val() }, function (data) {

            //         $('#rdUserRoles').empty();

            //         jQuery.each(data, function (i) {
            //             var option = $('<option></option>').attr("value", data[i].Value).text(data[i].Text);
            //             if (data[i].Selected == true) {
            //                 option.attr("selected", "selected");
            //             }
            //             $("#rdUserRoles").append(option);
            //          });

            // });


             $('#btnSetRole').click(function () {
                 jQuery.getJSON('@Url.Action("SetRole", "Home")', { id: $('#rdUserRoles').val() }, function (data) {

                     if (data = "success") { window.location.href="@Url.Action("Dashboard", "Home")";}

                });
            });

        });

    </script>

    @RenderSection("scripts", required: false)
</body>
</html>